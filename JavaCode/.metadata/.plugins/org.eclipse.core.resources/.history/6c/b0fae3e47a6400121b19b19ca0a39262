import java.net.*;
import java.io.*;

public class Server {
  public static void main (String [] args ) throws IOException {
    // create socket
    ServerSocket servsock = new ServerSocket(8000);
    while (true) {
      System.out.println("Waiting...");

      Socket sock = servsock.accept();
      System.out.println("Accepted connection : " + sock);

      // sendfile
      File myFile = new File ("C:\\Users/Tom/TestDoc/xxx.xml");
      byte [] mybytearray  = new byte [(int)myFile.length()];
      FileInputStream fis = new FileInputStream(myFile);
      BufferedInputStream bis = new BufferedInputStream(fis);
      bis.read(mybytearray,0,mybytearray.length);
      OutputStream os = sock.getOutputStream();
      System.out.println("Sending...");
      os.write(mybytearray,0,mybytearray.length);
      os.flush();
      sock.close();
      
    //second method
    
      Socket socket = null;
      InputStream is = null;
      FileOutputStream fos = null;
      BufferedOutputStream bos = null;
      int bufferSize = 0;

      try {
          socket = servsock.accept();
      } catch (IOException ex) {
          System.out.println("Can't accept client connection. ");
      }

      try {
          is = socket.getInputStream();

          bufferSize = socket.getReceiveBufferSize();
          System.out.println("Buffer size: " + bufferSize);
      } catch (IOException ex) {
          System.out.println("Can't get socket input stream. ");
      }

      try {
          fos = new FileOutputStream("C:\\Users/Tom/TestDoc/yyyfromClient.xml");
          bos = new BufferedOutputStream(fos);

      } catch (FileNotFoundException ex) {
          System.out.println("File not found. ");
      }

      byte[] bytes = new byte[bufferSize];

      int count;

      while ((count = is.read(bytes)) > 0) {
          bos.write(bytes, 0, count);
      }

      bos.flush();
      bos.close();
      is.close();
      socket.close();
      servsock.close();
  }
      
    }
    
    
    
    

    
    }
